# App启动优化与监控

App启动主要包括三个阶段：

* main函数之前
    1. 加载可执行文件(App .O文件的集合)
    2. 加载动态链接库，进行rebase指针调整和bind符号绑定
    3. Objc运行时的初始化处理，包括Objc相关类的注册，Category的注册，selecttor唯一性检查等
    4. 初始化，包括执行+load，attribute((constructor)) 修饰的函数的调用, 创建C++全局静态变量等。

    对应的优化策略：

    1. 减少动态库加载
    2. 减少加载启动后不会去使用的类或者方法
    3. +load方法里的内容可以放到首屏渲染完成后或者initialize()中，在一个+load方法中，进行运行时方法替换会造成4ms的消耗。
    4. 控制C++全局变量的数量。

* main函数执行后
    * 首屏初始化所需配置的文件读写操作
    * 首屏列表大数据的读取
    * 首屏渲染的大量计算等

    如何优化这部分的工作？从功能上梳理只在App启动式需要加载的功能，将不必须的功能放到需要用到时再进行加载。
* 首屏渲染完成

    * 功能级别的优化
    * 方法级别的优化